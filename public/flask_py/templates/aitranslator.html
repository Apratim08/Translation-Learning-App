<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MANGALINGUA AI Translator</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>

<body>
  <nav class="navbar">
    <div class="headline" id="title">
      <a href="#" class="back-button" onclick="window.history.back()">&#8656;</a>
      AI Translator
    </div>
  </nav>

  <div class="container">
    <div class="options">
      <div class="languageContainer">
        <div class="language">Japanese</div>
        <t3 style="font-size:24px; color:white; margin-left:20px; margin-right:20px;">â†’</t3>
        <div class="language" onclick="translateText()">English</div>
      </div>
      <div class="picContainer" id="picContainer">
        {% if filename %}
        <img src="{{ filename }}" alt="Uploaded Image" style="width:100%; height:auto;">
        {% endif %}
      </div>
      <div class="translationContainer" id="translationContainer" style="display:none;">
        <div class="spinnerContainer">
          <div style="background-color:#32FF77; width:36px; height:36px; border-radius:18px;"></div>
          <div class="systemMessage" style="color:white;">Processing...</div>
        </div>
      </div>
      <button class="bigButton" onclick="cancelUpload()">Cancel Processing</button>
    </div>
    <div class="menu-container">
      <a href="{{ url_for('base') }}">Home</a>
      <a href="{{ url_for('word_bank') }}">Word Bank</a>
      <a href="#">Link 3</a>
    </div>
  </div>

  <script src="{{ url_for('static', filename='script/script.js') }}"></script>
</body>

<script>

  function cancelUpload() {
    window.location.href = '{{ url_for("base") }}';
  }

  function createDivFromJSON() {
    // Get JSON message from the console
    //var jsonMessage = prompt("Enter JSON message:");

    try {
      // Parse the JSON message
      var jsonObj = JSON.parse(jsonMessage);

      // Extract values
      var translatedText = jsonObj['translated text'];
      var x = jsonObj['x'];
      var y = jsonObj['y'];
      var w = jsonObj['w'];
      var h = jsonObj['h'];

      // Create a new div element
      var div = document.createElement('div');

      // Set position and size
      div.style.left = x + 'px';
      div.style.top = y + 'px';
      div.style.width = w + 'px';
      div.style.height = h + 'px';

      // Add class for styling
      div.classList.add('box');

      // Set text content
      div.textContent = translatedText;

      // Append div to the body
      document.getElementById('picContainer').appendChild(div);

    } catch (error) {
      console.error('Error parsing JSON:', error);
    }
  }

  // Call the function when the page loads
  window.onload = createDivFromJSON;

</script>

</html>